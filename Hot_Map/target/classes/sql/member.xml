<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- mapper할때 써야됨 -->
<mapper namespace="member">
	<insert id="joinInsert">
		INSERT INTO MEMBER (MEM_ID, NAME, PW, EMAIL, ADDRESS, ADDRESS1, ADDRESS2, PHONE)
		VALUES (#{id}, #{name}, #{pw}, #{email}, #{address},#{address1},#{address2}, #{phone} )
	</insert>
	
	<select id="joinSelect">
		SELECT * FROM MEMBER
		WHERE MEM_ID=#{ID} AND PW=#{PW}
	</select>
	
	<select id="loginSelect" resultType="map" parameterType="map">
		SELECT * FROM MEMBER 
		WHERE MEM_ID=#{id} AND PW=#{pw}
	</select>
	
	<select id="joinIdCheck" resultType="int" parameterType="String">
		SELECT (COUNT(*)) CON FROM MEMBER 
		WHERE MEM_ID=#{id}
	</select>
	<insert id="phoneCheckNumber" parameterType="map">
		INSERT INTO PHONECHECK (PHONE, MSGCODE)
		VALUES (#{phone}, #{code})
	</insert>
	
	<select id="phoneCheck" parameterType="map" resultType="int">
		SELECT (COUNT(*)) CON FROM PHONECHECK 
		WHERE msgcode = #{code} and phone = #{phone}
		
	</select>
	<delete id="phoneCheckDelete" parameterType="map">
		DELETE FROM PHONECHECK
		WHERE phone = #{phone}
	</delete>
</mapper>
